<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3"><link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222"><meta name="keywords" content="CSS,Background,HTML,"><meta name="description" content="一、前言结论先行：我们给body设置背景色，实际我们看见的未必是body上的背景色：当html标签没有设置背景色时，我们看见的是作用在浏览器画布上的背景色，不是body上的；当html标签被设置了背景色时，我们看见的是真正作用在body上的背景色。人在前端已经漂泊数年，机缘巧合才发现，这几年给body写的背景色，全被浏览器给「吃」了。文中涉及的是CSS中关于特殊元素（html/body）的背景渲染"><meta name="keywords" content="CSS,Background,HTML"><meta property="og:type" content="article"><meta property="og:title" content="HTML&#x2F;BODY背景渲染原理"><meta property="og:url" content="https://37hwfe.github.io/2018/05/30/天呐！我给body设置的背景色被浏览器吃掉了！/index.html"><meta property="og:site_name" content="37海外前端博客"><meta property="og:description" content="一、前言结论先行：我们给body设置背景色，实际我们看见的未必是body上的背景色：当html标签没有设置背景色时，我们看见的是作用在浏览器画布上的背景色，不是body上的；当html标签被设置了背景色时，我们看见的是真正作用在body上的背景色。人在前端已经漂泊数年，机缘巧合才发现，这几年给body写的背景色，全被浏览器给「吃」了。文中涉及的是CSS中关于特殊元素（html/body）的背景渲染"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/5/29/163ac1f6e90bdee3?w=1160&h=652&f=jpeg&s=43504"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/5/29/163ac28b30125a81?w=1156&h=652&f=jpeg&s=45796"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/5/29/163ac2dfb7e1e4fe?w=1156&h=648&f=jpeg&s=62578"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/5/30/163aecafb284ec93?w=1158&h=650&f=jpeg&s=51375"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/5/30/163aeceb4cbf2782?w=1156&h=654&f=jpeg&s=63084"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/5/30/163aed8393d1d212?w=1160&h=652&f=jpeg&s=61155"><meta property="og:updated_time" content="2018-05-31T01:53:57.784Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="HTML&#x2F;BODY背景渲染原理"><meta name="twitter:description" content="一、前言结论先行：我们给body设置背景色，实际我们看见的未必是body上的背景色：当html标签没有设置背景色时，我们看见的是作用在浏览器画布上的背景色，不是body上的；当html标签被设置了背景色时，我们看见的是真正作用在body上的背景色。人在前端已经漂泊数年，机缘巧合才发现，这几年给body写的背景色，全被浏览器给「吃」了。文中涉及的是CSS中关于特殊元素（html/body）的背景渲染"><meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2018/5/29/163ac1f6e90bdee3?w=1160&h=652&f=jpeg&s=43504"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"5.1.3",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://37hwfe.github.io/2018/05/30/天呐！我给body设置的背景色被浏览器吃掉了！/"><title>HTML/BODY背景渲染原理 | 37海外前端博客</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">37海外前端博客</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">37海外前端博客</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://37hwfe.github.io/2018/05/30/天呐！我给body设置的背景色被浏览器吃掉了！/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="37HWFE"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="37海外前端博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">HTML/BODY背景渲染原理</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-30T11:56:00+08:00">2018-05-30 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/前端开发/" itemprop="url" rel="index"><span itemprop="name">前端开发</span> </a></span></span><span id="/2018/05/30/天呐！我给body设置的背景色被浏览器吃掉了！/" class="leancloud_visitors" data-flag-title="HTML/BODY背景渲染原理"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数&#58;</span> <span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h3><font color="#f66"><strong>结论先行：</strong></font><p>我们给body设置背景色，实际我们看见的未必是body上的背景色：</p><ol><li><font color="#42b983">当html标签没有设置背景色时，我们看见的是作用在浏览器画布上的背景色，不是body上的；</font></li><li>当html标签被设置了背景色时，我们看见的是真正作用在body上的背景色。</li></ol><p>人在前端已经漂泊数年，机缘巧合才发现，这几年给body写的背景色，全被浏览器给「吃」了。文中涉及的是<font color="#42b983">CSS中关于特殊元素（html/body）的背景渲染的原理</font>，对你而言它也许是块新大陆，也可能，你早已熟知，那么正好···可以一起交流下？</p><h3 id="二、一个情景"><a href="#二、一个情景" class="headerlink" title="二、一个情景"></a>二、一个情景</h3><p>有一个渲染列表的页面（不定高），要求<font color="#f66">背景是渐变颜色</font>，效果如下图：<br><img src="https://user-gold-cdn.xitu.io/2018/5/29/163ac1f6e90bdee3?w=1160&amp;h=652&amp;f=jpeg&amp;s=43504" alt=""><br><strong>需求很简单：</strong></p><ul><li>列表内容不足以撑满一屏时，整屏背景以渐变色填充；</li><li>列表内容超过一屏高度时，整个页面背景以渐变色填充；</li></ul><h3 id="三、情景破解"><a href="#三、情景破解" class="headerlink" title="三、情景破解"></a>三、情景破解</h3><font color="#f66">姿势有很多，偏爱的只有妳这一种。</font><p>PS：破解情景的解法有很多，而下面这种解法可以引起我们关于html、body背景渲染原理的思考。</p><h5 id="Step-1：首先给body设置颜色渐变"><a href="#Step-1：首先给body设置颜色渐变" class="headerlink" title="Step 1：首先给body设置颜色渐变"></a>Step 1：首先给body设置颜色渐变</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">body</span>&#123; <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(#FFFAD0,#ffffff); &#125;</div></pre></td></tr></table></figure><p>不出意外，页面渐变出现了断层👇<br><img src="https://user-gold-cdn.xitu.io/2018/5/29/163ac28b30125a81?w=1156&amp;h=652&amp;f=jpeg&amp;s=45796" alt=""></p><h5 id="Step-2：设置html高度为100-，同时给body设置下min-height"><a href="#Step-2：设置html高度为100-，同时给body设置下min-height" class="headerlink" title="Step 2：设置html高度为100%，同时给body设置下min-height"></a>Step 2：设置html高度为100%，同时给body设置下min-height</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span>&#123; <span class="attribute">height</span>: <span class="number">100%</span>;&#125;</div><div class="line"><span class="selector-tag">body</span>&#123; <span class="attribute">min-height</span>: <span class="number">100%</span>; <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(#FFFAD0,#ffffff); &#125;</div></pre></td></tr></table></figure><p>又不出意外，看起来很OJBK，没有出现断层了！</p><p>突然，内容渐渐多了起来，超过一屏的高度了···👇<br><img src="https://user-gold-cdn.xitu.io/2018/5/29/163ac2dfb7e1e4fe?w=1156&amp;h=648&amp;f=jpeg&amp;s=62578" alt=""></p><p>呃···这是什么情况？超过一屏之后又断层了！[what the fuck &amp; 掀桌].jpg</p><h5 id="Step3：设置html的背景色"><a href="#Step3：设置html的背景色" class="headerlink" title="Step3：设置html的背景色"></a>Step3：设置html的背景色</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span>&#123; <span class="attribute">height</span>: <span class="number">100%</span>; <span class="attribute">background</span>: red; &#125;</div></pre></td></tr></table></figure><p>是的，你没看错，我给html设置了红色！不得不服气，这样的骚操作竟然解决了上面断层的问题。</p><h5 id="突然兴起的总结"><a href="#突然兴起的总结" class="headerlink" title="突然兴起的总结"></a>突然兴起的总结</h5><font color="#f66"><strong>小小梳理下我们遇到的疑点：</strong></font><ol><li>首先我们给body设置了渐变色，即使内容超过一屏，我们看到的也应该是body那一层，即是渐变色的背景，不应该断层！</li><li>为什么给html元素设置一个背景色就可以完美解决这个断层？</li></ol><h3 id="四、原理解析"><a href="#四、原理解析" class="headerlink" title="四、原理解析"></a>四、原理解析</h3><p>我们这个问题涉及到了三个对象：<font color="#42b983">html元素、body元素和浏览器画布</font>，我们需要了解它们三者之间渲染背景色的机制。</p><blockquote><p>The document canvas is the infinite surface over which the document is rendered. [CSS2] Since no element corresponds to the canvas, in order to allow styling of the canvas CSS propagates the background of the root element (or, in the case of HTML, the</p><body>element) as described below. However, if no boxes are generated for the element whose background would be used for the canvas (for example, if the root element has display: none), then the canvas background is transparent.<p></p><p>The background of the root element becomes the background of the canvas and its background painting area extends to cover the entire canvas. However, any images are sized and positioned relative to the root element as if they were painted for that element alone. (In other words, the background positioning area is determined as for the root element.) The root element does not paint this background again, i.e., the used value of its background is transparent.</p></body></blockquote><p>以上是w3c对特定元素（根元素）背景的定义说明，总结为以下两点：</p><ul><li><font color="#42b983">CSS根据根元素（html/body）给文档画布（该画布是无限大的，我们姑且理解为浏览器画布）渲染背景颜色，同时背景色的定位区域就是根元素的区域；</font></li><li>根元素不再绘制该背景色，即根元素背景的使用值是透明的。</li></ul><p>基于这两点解答前面我们的疑问：</p><h5 id="1、给body设置了渐变色背景，内容超过一屏的时候，出现了断层"><a href="#1、给body设置了渐变色背景，内容超过一屏的时候，出现了断层" class="headerlink" title="1、给body设置了渐变色背景，内容超过一屏的时候，出现了断层"></a>1、给body设置了渐变色背景，内容超过一屏的时候，出现了断层</h5><p>真相是，浏览器画布首先获取根节点的背景样式，由于html我们没有设置，所以它获取了body的背景色，从而导致浏览器画布也是渐变色背景；</p><p>其次，浏览器画布背景色的定位区域取决于根元素的区域，这里的根元素是html，而我们对html做了 height:100% 的设置。所以浏览器画布以该区域的背景色重复渲染。</p><p>用图举证：<br>给html设置50%的width，那么左侧看到的是我们的页面dom内容，右侧则是浏览器画布<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span>&#123; <span class="attribute">height</span>: <span class="number">100%</span>; <span class="attribute">width</span>: <span class="number">50%</span>; &#125;</div><div class="line"><span class="selector-tag">body</span>&#123; <span class="attribute">min-height</span>: <span class="number">100%</span>; <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(#FFFAD0,#ffffff); &#125;</div></pre></td></tr></table></figure><p></p><p><img src="https://user-gold-cdn.xitu.io/2018/5/30/163aecafb284ec93?w=1158&amp;h=650&amp;f=jpeg&amp;s=51375" alt=""><br>可以发现，左右两侧的背景色是一致的：<br><img src="https://user-gold-cdn.xitu.io/2018/5/30/163aeceb4cbf2782?w=1156&amp;h=654&amp;f=jpeg&amp;s=63084" alt=""></p><font color="#f66">证明了浏览器画布取了body的背景色进行渲染，而body的背景色其实是透明值，必然地，我们在body看见的是会断层的渐变色。</font><p><font color="#f66"><strong>所以，我们给body设置的背景色被浏览器画布吃掉了!</strong></font></p><h5 id="2、通过html设置背景色的方式解决了断层问题"><a href="#2、通过html设置背景色的方式解决了断层问题" class="headerlink" title="2、通过html设置背景色的方式解决了断层问题"></a>2、通过html设置背景色的方式解决了断层问题</h5><p>我们给html设置背景色，其实是<font color="#f66">让html去承担被浏览器画布取色的任务，这时候body的值就是我们设置的渐变色</font>。以图举证：<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span>&#123; <span class="attribute">height</span>: <span class="number">100%</span>; <span class="attribute">width</span>: <span class="number">50%</span>; <span class="attribute">background</span>: <span class="number">#42b983</span>; &#125;</div></pre></td></tr></table></figure><p></p><p><img src="https://user-gold-cdn.xitu.io/2018/5/30/163aed8393d1d212?w=1160&amp;h=652&amp;f=jpeg&amp;s=61155" alt=""><br>对的，红色不喜欢，我决定了换成vue的主题绿。如此，浏览器画布取了html的背景色，左侧就可以正常看见body的渐变背景了。</p><h3 id="五、结语"><a href="#五、结语" class="headerlink" title="五、结语"></a>五、结语</h3><p>以上提及的知识点也许很基础，它只是w3c里面关于背景渲染的标准，只不过被我们很多人忽略而已。现在踩坑，记之共勉。</p><p><strong>原文链接：</strong><a href="https://juejin.im/post/5b0d52e5f265da092918d902" target="_blank" rel="noopener">天呐！我给body设置的背景色被浏览器吃掉了！</a></p><p><strong>参考</strong></p><p><a href="https://stackoverflow.com/questions/10947541/applying-a-background-to-html-and-or-body" target="_blank" rel="noopener">Applying a background to<html>and/or<body></body></html></a></p><p><a href="https://www.w3.org/TR/css-backgrounds-3/#special-backgrounds" target="_blank" rel="noopener">Backgrounds of Special Elements</a></p></div><div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"><img id="wechat_subscriber_qcode" src="/images/qrcode.jpg" alt="37HWFE wechat" style="width:200px;max-width:100%"><div>一个优秀的前端团队</div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>还差一分我就可以去买咖啡了</div><button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechatpay.png" alt="37HWFE 微信支付"><p>微信支付</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/CSS/" rel="tag"># CSS</a> <a href="/tags/Background/" rel="tag"># Background</a> <a href="/tags/HTML/" rel="tag"># HTML</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/05/08/不好意思，观察者模式跟发布订阅模式就是不一样/" rel="next" title="不好意思，观察者模式跟发布订阅模式就是不一样"><i class="fa fa-chevron-left"></i> 不好意思，观察者模式跟发布订阅模式就是不一样</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNDY2MC8xMTE5Nw"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">37HWFE</p><p class="site-description motion-element" itemprop="description">37海外前端博客</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">14</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/37HWFE" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="your-zhihu-url" target="_blank" title="知乎"><i class="fa fa-fw fa-question-circle"></i>知乎</a> </span><span class="links-of-author-item"><a href="weibo-url" target="_blank" title="微博"><i class="fa fa-fw fa-weibo"></i>微博</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-globe"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="http://www.alloyteam.com/team/" title="alloyteam" target="_blank">alloyteam</a></li><li class="links-of-blogroll-item"><a href="https://75team.com/post/list" title="奇舞团" target="_blank">奇舞团</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、前言"><span class="nav-number">1.</span> <span class="nav-text">一、前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、一个情景"><span class="nav-number">2.</span> <span class="nav-text">二、一个情景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、情景破解"><span class="nav-number">3.</span> <span class="nav-text">三、情景破解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Step-1：首先给body设置颜色渐变"><span class="nav-number">3.0.1.</span> <span class="nav-text">Step 1：首先给body设置颜色渐变</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Step-2：设置html高度为100-，同时给body设置下min-height"><span class="nav-number">3.0.2.</span> <span class="nav-text">Step 2：设置html高度为100%，同时给body设置下min-height</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Step3：设置html的背景色"><span class="nav-number">3.0.3.</span> <span class="nav-text">Step3：设置html的背景色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#突然兴起的总结"><span class="nav-number">3.0.4.</span> <span class="nav-text">突然兴起的总结</span></a></li></ol></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#四、原理解析"><span class="nav-number">4.</span> <span class="nav-text">四、原理解析</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、给body设置了渐变色背景，内容超过一屏的时候，出现了断层"><span class="nav-number">4.0.1.</span> <span class="nav-text">1、给body设置了渐变色背景，内容超过一屏的时候，出现了断层</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、通过html设置背景色的方式解决了断层问题"><span class="nav-number">4.0.2.</span> <span class="nav-text">2、通过html设置背景色的方式解决了断层问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、结语"><span class="nav-number">5.</span> <span class="nav-text">五、结语</span></a></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">37HWFE</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){var r=!1,s=0,a=0,i=n.title.trim(),c=i.toLowerCase(),l=n.content.trim().replace(/<[^>]+>/g,""),h=l.toLowerCase(),p=decodeURIComponent(n.url),u=[],f=[];if(""!=i&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}u=u.concat(e(t,c,!1)),f=f.concat(e(t,h,!1))}),(u.length>0||f.length>0)&&(r=!0,s=u.length+f.length)),r){[u,f].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});function d(e,o,n,r){for(var s=r[r.length-1],i=s.position,c=s.word,l=[],h=0;i+c.length<=n&&0!=r.length;){c===t&&h++,l.push({position:i,length:c.length});var p=i+c.length;for(r.pop();0!=r.length&&(s=r[r.length-1],i=s.position,c=s.word,p>i);)r.pop()}return a+=h,{hits:l,start:o,end:n,searchTextCount:h}}var g=[];0!=u.length&&g.push(d(0,0,i.length,u));for(var v=[];0!=f.length;){var $=f[f.length-1],C=$.position,m=$.word,x=C-20,w=C+80;x<0&&(x=0),w<C+m.length&&(w=C+m.length),w>l.length&&(w=l.length),v.push(d(0,x,w,f))}v.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var y=parseInt("1");y>=0&&(v=v.slice(0,y));function T(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var b="";0!=g.length?b+="<li><a href='"+p+"' class='search-result-title'>"+T(i,g[0])+"</a>":b+="<li><a href='"+p+"' class='search-result-title'>"+i+"</a>",v.forEach(function(t){b+="<a href='"+p+'\'><p class="search-result">'+T(l,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:a,hitCount:s,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),!1===isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){27===t.which&&$(".search-popup").is(":visible")&&onPopupClose()})</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("jvXRDFnaCIR8kyboOlW9j1aw-gzGzoHsz","k9Trl4dccikINg0qnqFYoXJC")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){if(0!==e.length){for(c=0;c<e.length;c++){var t=e[c],i=t.get("url"),s=t.get("time"),l=document.getElementById(i);$(l).find(".leancloud-visitors-count").text(s)}for(var c=0;c<n.length;c++){var i=n[c],l=document.getElementById(i),r=$(l).find(".leancloud-visitors-count");""==r.text()&&r.text(0)}}else o.find(".leancloud-visitors-count").text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){$(document.getElementById(n)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var s=new e,l=new AV.ACL;l.setPublicReadAccess(!0),l.setPublicWriteAccess(!0),s.setACL(l),s.set("title",o),s.set("url",n),s.set("time",1),s.save(null,{success:function(e){$(document.getElementById(n)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script></body></html>